From ba9de767661dcf899a7233fafca67ae0809ff569 Mon Sep 17 00:00:00 2001
From: Marc Titinger <mtitinger@baylibre.com>
Date: Tue, 10 Nov 2015 16:41:47 +0100
Subject: [RFC 0/4] IIO: add support for INA2xx power monitor

This chip has fair support in the hwmon stack already, this work is more
as a pathfinder for me, hence I post it as RFC to digg some more into 'does
and donts' with IIO.

Nevertheless, it provides a working streaming scheme for capturing
power/voltage/current with this chip. It works in local and remote
mode with iio_readdev and I did some sniffing tests with iio-oscilloscope
with promising results inspite of timeout issues for long temporal buffers
presumably due to the slow rates for this chip compared to expected high-speed
CoDecs (and maybe the lack of a proper plugin?).

The kthread I'm using does an active waiting to allow for sampling periods
shorter than a tick. I have not experienced performance issues with it on
the board (BeagleBoneBlack), IIOD could always schedule on time as far as I
could see, maybe with other i2c backends a schedule() could be mandatory ?

Many thanks,

Marc Titinger (4):
  iio: ina2xx: add direct IO support for TI INA2xx Power Monitors
  iio: ina2xx: add SAMP_FREQ attribute.
  iio: ina2xx: add debugfs reg access
  iio: ina2xx: add SOFTWARE buffer mode using an iio kfifo.

 drivers/iio/adc/Kconfig      |  11 +
 drivers/iio/adc/Makefile     |   1 +
 drivers/iio/adc/ina2xx-iio.c | 579 +++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 591 insertions(+)
 create mode 100644 drivers/iio/adc/ina2xx-iio.c

-- 
1.9.1

